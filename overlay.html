<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Win Overlay</title>
    <style> /* ... Tu CSS existente no cambia ... */
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background-color: transparent; overflow: hidden; font-family: 'Arial Black', Gadget, sans-serif; }
        .preview-box { position: absolute; top: 20px; left: 20px; background-color: #000000; color: white; border-radius: 12px; padding: 10px 25px; display: inline-flex; align-items: center; gap: 15px; font-size: 2.5em; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .preview-box img { width: 50px; height: 50px; }
        .preview-number { background-color: white; color: black; border-radius: 8px; padding: 0px 12px; font-size: 0.9em; min-width: 30px; text-align: center; line-height: 1.4; }
        .preview-separator { font-weight: normal; color: #aaa; }
    </style>
</head>
<body>

    <div class="preview-box">
         <img src="images/trophy.png" alt="Trofeo">
         <span class="preview-text">Win</span>
         <span class="preview-number" id="overlay-conteo">0</span>
         <span class="preview-separator">/</span>
         <span class="preview-number" id="overlay-meta">5</span>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const conteoElement = document.getElementById('overlay-conteo');
        const metaElement = document.getElementById('overlay-meta');
        const socket = io();

        // 1. Cargar datos iniciales al abrir
        socket.on('init-data', (db) => {
            if (db && db.metaWin1) updateDisplay(db.metaWin1);
        });

        // 2. Escuchar actualizaciones en vivo
        socket.on('widget-update', (msg) => {
            if (msg.widgetId === 'metaWin1') {
                updateDisplay(msg.data);
            }
        });

        function updateDisplay(data) {
            conteoElement.textContent = data.conteo || 0;
            metaElement.textContent = data.meta || 5;
        }
    </script>

</body>
</html>